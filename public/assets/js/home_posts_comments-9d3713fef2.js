class PostComments{constructor(t){this.postId=t,this.postContainer=$(`#post-${t}`),this.newCommentForm=$(`#post-${t}-comments-form`),this.createComment(t);let e=this;$(" .delete-comment-button",this.postContainer).each((function(){e.deleteComment($(this))}))}createComment(t){let e=this;this.newCommentForm.submit((function(n){n.preventDefault();$.ajax({type:"post",url:"/comments/create",data:$(this).serialize(),success:function(n){let s=e.newCommentDom(n.data.comment);$(`#post-comments-${t}`).prepend(s),$(".new-comment-textarea").val(""),e.deleteComment($(" .delete-comment-button",s)),new ToggleLike($(" .like-button",s)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log("ERROR",t),console.log(t.responseText)}})}))}newCommentDom(t){return t.user.avatar?$(`<li id="comment-${t._id}">\n\t\t\t\t\t<section class="comment">\n\t\t\t\t\t\t<img src=${t.user.avatar} alt=${t.user.name}>\n\t\t\t\t\t\t<h6 style="display: inline;"> <b> ${t.user.name}</b>   ${t.content}</h6>\n\t\t               \n\t\t\t\t\t\t<a href="/likes/toggle/?id=${t._id}&type=Comment" class="like-button" data-likes="0"><i class="far fa-heart"></i>  0</a>\n\t\t                <a class="delete-comment-button" href="/comments/destroy/${t._id}"><i class="fas fa-trash-alt"></i></a>\n\t\t\t\t\t</section>\n\t\t        </li>`):$(`<li id="comment-${t._id}">\n\t\t\t\t\t<section class="comment">\n\t\t\t\t\t\t<i class="fas fa-user"></i>\n\t\t\t\t\t\t<h6 style="display: inline;"> <b> ${t.user.name}</b>  ${t.content}</h6>\n\t\t               \n\t\t\t\t\t\t<a href="/likes/toggle/?id=${t._id}&type=Comment" class="like-button" data-likes="0"><i class="far fa-heart"></i>  0</a>\n\t\t                <a class="delete-comment-button" href="/comments/destroy/${t._id}"><i class="fas fa-trash-alt"></i></a>\n\t\t\t\t\t</section>\n\t\t        </li>`)}deleteComment(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#comment-${t.data.comment_id}`).remove(),new Noty({theme:"relax",text:"Comment Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))}}